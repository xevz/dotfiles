#!/bin/bash

monitor=$1
output_name=$(xrandr | awk '$2 == "connected" { print $1 }' | sed -n "$(($monitor + 1))p")
stylus_name=$(xinput list --name-only | grep 'stylus')

if pgrep awesome &>/dev/null; then
    nmonitor=$(($monitor + 1))
    echo "awful.screen.focus(${nmonitor})" | awesome-client
elif pgrep i3 &>/dev/null; then
    nmonitor=$(($monitor + 1))
    case $nmonitor in
        1)
            i3-msg mode default
            i3-msg focus output DVI-I-1
            xsetwacom --set "$stylus_name" MapToOutput 1600x1200+1600+0
            ;;
        2)
            i3-msg mode monitor$nmonitor
            i3-msg focus output DP-1
            xsetwacom --set "$stylus_name" MapToOutput 1600x1200+0+0
            ;;
        3)
            i3-msg mode monitor$nmonitor
            i3-msg focus output DVI-D-0
            xsetwacom --set "$stylus_name" MapToOutput 1600x1200+3200+0
            ;;
    esac
else
    POSITION=$(xwarppointer get)
    DISPLAY=:0.$monitor swarp $POSITION
fi

